[![License: LGPL v3](https://img.shields.io/badge/License-LGPL%20v3-blue.svg)](https://www.gnu.org/licenses/lgpl-3.0) ![](https://img.shields.io/github/languages/top/WhiteMinds/trial-tower) ![](https://img.shields.io/github/issues/WhiteMinds/LiveAutoRecord) ![](https://img.shields.io/npm/v/@autorecord/manager?label=%40autorecord%2Fmanager) ![](https://img.shields.io/github/v/release/WhiteMinds/LiveAutoRecord?label=client) [![client-build](https://github.com/WhiteMinds/LiveAutoRecord/actions/workflows/release.yml/badge.svg)](https://github.com/WhiteMinds/LiveAutoRecord/actions/workflows/release.yml)

<div align="center">
  <div align="center">
    <img
      src="packages/electron/build/icons/256x256.png"
      alt="Logo"
      width="240"
    />
  </div>
  <h3 align="center">Live Auto Record</h3>
  <p align="center">æ”¯æŒå¤šä¸ªç›´æ’­å¹³å°çš„è‡ªåŠ¨å½•åˆ¶å·¥å…· / NPM åŒ…</p>
  <div align="center">
    <a href="https://github.com/WhiteMinds/LiveAutoRecord/issues"
      >Bug åé¦ˆ</a
    >
    Â·
    <a href="https://github.com/WhiteMinds/LiveAutoRecord/issues"
      >åŠŸèƒ½å»ºè®®</a
    >
    Â·
    <a href="https://github.com/WhiteMinds/LiveAutoRecord/tree/3.x"
      >æ—§ç‰ˆæœ¬</a
    >
  </div>
</div>
<br />

## å…³äºæœ¬é¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªé¢å‘å¤šä¸ªåœºæ™¯çš„å¼€æºé¡¹ç›®

- æ™®é€šç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨å®¢æˆ·ç«¯ç‰ˆæœ¬æ¥è‡ªåŠ¨å½•åˆ¶éœ€è¦å›é¡¾çš„ç›´æ’­ä¸å¼¹å¹•
- ä¸“ä¸šç”¨æˆ·å¯ä»¥ä½¿ç”¨æœåŠ¡ç«¯éƒ¨ç½²æ¥ç¦»çº¿è‡ªåŠ¨å½•åˆ¶
- å¼€å‘è€…å¯ä»¥åŸºäºæ’ä»¶ç³»ç»Ÿæ¥æ‰©å±•å¯ç”¨çš„ç›´æ’­å¹³å°ï¼Œæˆ–åŸºäº `@autorecord/manager` åŒ…å’Œå·²å®ç°çš„ç›´æ’­å¹³å°æ’ä»¶æ¥åšä¸€æ¬¾æ–°çš„è½¯ä»¶

### Built With

<img src="https://img.shields.io/badge/Lerna-9333EA?style=for-the-badge&logo=lerna&logoColor=white" /> <img src="https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white" /> <img src="https://img.shields.io/badge/Vite-646CFF?style=for-the-badge&logo=vite&logoColor=white" /> <img src="https://img.shields.io/badge/Vue.js-4FC08D?style=for-the-badge&logo=vue.js&logoColor=white" /> <img src="https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white" /> <img src="https://img.shields.io/badge/Electron-47848F?style=for-the-badge&logo=electron&logoColor=white" /> <img src="https://img.shields.io/badge/FFmpeg-007808?style=for-the-badge&logo=ffmpeg&logoColor=white" /> <img src="https://img.shields.io/badge/Express-000000?style=for-the-badge&logo=express&logoColor=white" />

## å®¢æˆ·ç«¯

åŸºäº Electron æ•´åˆäº† `http-server` ä¸ `web` çš„éƒ¨åˆ†ï¼Œå¹¶å¯¹ä¸€éƒ¨åˆ†åŠŸèƒ½åšåŸç”ŸåŒ–æ”¯æŒã€‚

å…·æœ‰è‰¯å¥½çš„é”®ç›˜æ“ä½œæ”¯æŒï¼Œé¢„æœŸä¸Šå¯ä»¥çº¯é”®ç›˜æ“ä½œã€‚

[è¿›å…¥ä¸‹è½½é¡µ](https://github.com/WhiteMinds/LiveAutoRecord/releases/)

#### æ”¯æŒç³»ç»Ÿ

- <img src="https://img.shields.io/badge/Windows-0078D6?style=for-the-badge&logo=windows&logoColor=white" align="top" />
- <img src="https://img.shields.io/badge/mac%20os-000000?style=for-the-badge&logo=apple&logoColor=white" align="top" />
- ç”±äº linux ç”¨æˆ·ç¾¤ä½“è¾ƒå°‘ï¼Œæ²¡æœ‰å°è¯•åœ¨ç³»ç»Ÿæ­¤ç¼–è¯‘ï¼Œä½†ç†è®ºä¸Šå¯ä»¥æ”¯æŒã€‚

#### é¢„è§ˆ

<h5 align="center">å½•æ’­ä»»åŠ¡åˆ—è¡¨</h5>

<div align="center"><img src="/readme-assets/1.png" width="720" /></div>

<details>
  <summary>ç‚¹å‡»æŸ¥çœ‹æ›´å¤š ğŸ‘‰</summary>

<h5 align="center">æ–°å¢å½•æ’­ä»»åŠ¡</h5>

<div align="center"><img src="/readme-assets/5.png" width="720" /></div>

<h5 align="center">å½•æ’­å†å²</h5>

<div align="center"><img src="/readme-assets/2.png" width="720" /></div>

<!-- #### å½•æ’­æ’­æ”¾å™¨ -->

<!-- ![](/readme-assets/3.png) -->

<h5 align="center">å½•æ’­æ’­æ”¾å™¨-ç½‘é¡µå…¨å±</h5>

<div align="center"><img src="/readme-assets/4.png" width="720" /></div>

<h5 align="center">å…¨å±€å½•æ’­é…ç½®</h5>

<div align="center"><img src="/readme-assets/6.png" width="720" /></div>

</details>

#### å¼€å‘

```bash
# install dependencies
yarn install

# build client dep packages
cd packages/shared && yarn build
cd packages/manager && yarn build

# dev electron
yarn app:dev

# build electron application for production
yarn app:build
```

## æœåŠ¡ç«¯éƒ¨ç½²

ä½ å¯ä»¥é€šè¿‡ä¸‹åˆ—å‘½ä»¤æ¥è¿›è¡ŒæœåŠ¡ç«¯éƒ¨ç½²ï¼š

```shell
# å…‹éš†æœ¬ä»“åº“
git clone git@github.com:WhiteMinds/LiveAutoRecord.git && cd LiveAutoRecord
# å®‰è£…ä¾èµ–
yarn install
# ç¼–è¯‘å†…éƒ¨ä¾èµ–åŒ…
cd packages/shared && yarn build
cd packages/manager && yarn build
# å¯åŠ¨æœåŠ¡ç«¯
cd packages/http-server && yarn build && yarn start
# å¯åŠ¨å‰ç«¯ï¼ˆä¹Ÿå¯ä»¥å°†å‰ç«¯ build åé€šè¿‡ nginx ç­‰æ–¹æ¡ˆæ¥è®¿é—®ï¼‰
cd packages/web && yarn preview
```

#### å¼€å‘

```bash
# install dependencies
yarn install

# build client dep packages
cd packages/shared && yarn build
cd packages/manager && yarn build

# dev server
cd packages/http-server && yarn start:dev
cd packages/web && yarn dev

# deployment for production
cd packages/http-server && yarn build && yarn start # Or start using another method, such as nodemon
cd packages/web && yarn build # Start a web service using a tool such as nginx
```

## ä½œä¸º NPM åŒ…å¼•å…¥

æ ¸å¿ƒçš„åŒ…ä¸º [@autorecord/manager](https://www.npmjs.com/package/@autorecord/manager)ï¼Œè¯¥åŒ…å®ç°äº†é¢‘é“çš„æ¨¡å‹ï¼Œè‡ªåŠ¨æ£€æŸ¥çš„è°ƒåº¦ç­‰ã€‚

æ­¤å¤–è¿˜è¦å¼•å…¥ç›´æ’­å¹³å°çš„æ”¯æŒæ’ä»¶æˆ–è‡ªå·±å®ç°è‡ªå®šä¹‰çš„å¹³å°æ”¯æŒæ’ä»¶ï¼Œå·²çŸ¥çš„æ’ä»¶æœ‰å¦‚ä¸‹ï¼š

- [@autorecord/douyu-recorder](https://www.npmjs.com/package/@autorecord/douyu-recorder)
- [@autorecord/bilibili-recorder](https://www.npmjs.com/package/@autorecord/bilibili-recorder)
- [@autorecord/huya-recorder](https://www.npmjs.com/package/@autorecord/huya-recorder)
- [@autorecord/douyin-recorder](https://www.npmjs.com/package/@autorecord/douyin-recorder)

ä½ å¯ä»¥é€šè¿‡ `yarn add @autorecord/manager ` æˆ–å…¶ä»–åŒ…ç®¡ç†å™¨æ¥å¼•å…¥å®ƒä»¬ã€‚

ä¸‹é¢æ˜¯ä»£ç å®ä¾‹ï¼Œå¦å¤– http-server åŒ…ä¹Ÿæ˜¯é€šè¿‡ `@autorecord/manager` å’Œå¤šä¸ªæ’ä»¶å®ç°çš„ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå¼€å‘æ—¶çš„å‚è€ƒã€‚

### Example

```typescript
import { createRecorderManager } from '@autorecord/manager'
import { provider as providerForDouYu } from '@autorecord/douyu-recorder'

const manager = createRecorderManager({
  providers: [providerForDouYu],
  // ... other options ...
})
manager.addRecorder({
  providerId: providerForDouYu.id,
  channelId: '74751',
  quality: 'highest',
  streamPriorities: [],
  sourcePriorities: [],
  // ... other options ...
})
manager.startCheckLoop()
```

## æ³¨æ„äº‹é¡¹

è½¯ä»¶é»˜è®¤ä½¿ç”¨ fmp4 æ ¼å¼è¿›è¡Œå½•åˆ¶ï¼Œè¿™æ˜¯ç»¼åˆäº†æŠ—æŸåã€å®æ—¶æŸ¥çœ‹ç­‰æ–¹é¢çš„è€ƒè™‘ï¼Œå¦‚æœä½¿ç”¨æ­¤æ ¼å¼é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥æ‰‹åŠ¨æ›´æ¢ä¸ºå…¶ä»–æ ¼å¼ã€‚

## Road Map

- å®Œå–„å¼¹å¹•æ’­æ”¾å™¨çš„ UI
- å®Œå–„é”™è¯¯å¤„ç†
- å¤„ç†ä¸€äº›ä»£ç ä¸­çš„ TODO é¡¹
- æä¾›æ–‡æ¡£
- å¢åŠ æµ‹è¯•
- ç®€åŒ–æœåŠ¡ç«¯éƒ¨ç½²æµç¨‹
- i18n
